<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spzx.product.mapper.ProductSkuMapper">

    <select id="selectTopSale" resultType="com.spzx.product.api.domain.ProductSku">
        select sku.* from product_sku sku
        left join product p on p.id = sku.product_id
        left join sku_stock ss on ss.sku_id = sku.id
        where
        p.status = 1
        and p.audit_status = 1
        and sku.del_flag = 0
        and p.del_flag = 0
        and ss.del_flag = 0
        order by ss.sale_num desc
        limit 20
    </select>
</mapper>